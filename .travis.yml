language: java

jdk: oraclejdk8

sudo: false

addons:
  apt:
    packages:
      - jq

env:
  global:
    - secure: "gEVErE2dmw/04W70NKNM+uvKAefGyHF1opYTWpwNWgca/Me0EY7qtvKLWStDUUy/XhM7U1iTPvo8T8Xw4zSyU8Z2n+g3oBOBMojZ7EU8WxAIuSXWUB/LeDEfcno2ajmSv91n18GFGw6IQeIidWbwRGLW/1Hmv3EPxg1lfcmu7jaFWjIB8meOZHf5HGxDBp0rLbYVyslXWMofUn10lPh2ScVApn+YyPzv1mzgEN1wchJ4spm4lp0iUWdgG61DZoqA/Y/j4P9xT/ckSv+Hdh1RNOskI0oN2Rp/atoOj9kzYI4/L2O3No36J9kMcC7xV38HGYZrKJq0h8/92MbmTjoiiOSeoU3duV/0Y72fVOA5llnpQQnds8oGNUJlm0nMVybGoW2ZzoklN1PBHc5Hd+7x1YGnCtqh8kS5e3nc2diSI1OqLCondKVzZTVBGkS/CZyQiBr8g709SytM04rQkfP3EAb3fiEChmLJPqX6gS887VYCBixRiT71lDLzPeQ2F0Rw12uxS1QFWRert85jPA9yF0oCHx8KQ+4PQ7s3B8pLscjkMokfCKkaf+npB/1Irl/N+Bucoc924AAODzw5+iGmveezt7iEZ8/RddMozPRAGHcTiMylk/bU4lmoPMZLfcfS2HsxO4hwXoLDuC+neh1Uj4vrqfQAGvKW2thEPiYEb5Q="
  matrix:
    - OUTLANG=java
#    - OUTLANG=kotlin
#    - OUTLANG=php
#    - OUTLANG=python

install:
  - travis_retry wget http://central.maven.org/maven2/io/swagger/swagger-codegen-cli/2.2.3/swagger-codegen-cli-2.2.3.jar -O swagger-codegen-cli.jar
  - export APIVERSION=`curl -s 'https://www.thebluealliance.com/swagger/api_v3.json' | jq -r '.info.version'`

before_script:
  - git clone https://${GH_TOKEN}@github.com/fletch3555/tba-api-client-$OUTLANG.git tba-api-client-$OUTLANG

script:
  - ./codegen.sh

after_success:
  - ./commit.sh

after_failure:
  - cat test_failures.temp
